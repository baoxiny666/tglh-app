{"remainingRequest":"E:\\VueProject\\tglh-app-living\\tglh-app\\node_modules\\babel-loader\\lib\\index.js!E:\\VueProject\\tglh-app-living\\tglh-app\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\VueProject\\tglh-app-living\\tglh-app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\VueProject\\tglh-app-living\\tglh-app\\src\\components\\Login\\Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\VueProject\\tglh-app-living\\tglh-app\\src\\components\\Login\\Login.vue","mtime":1610441903743},{"path":"E:\\VueProject\\tglh-app-living\\tglh-app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1610417723000},{"path":"E:\\VueProject\\tglh-app-living\\tglh-app\\node_modules\\babel-loader\\lib\\index.js","mtime":1610417721066},{"path":"E:\\VueProject\\tglh-app-living\\tglh-app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1610417723000},{"path":"E:\\VueProject\\tglh-app-living\\tglh-app\\node_modules\\vue-loader\\lib\\index.js","mtime":1610417751528}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIudXJsLmpzIjsKaW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICJFOi9WdWVQcm9qZWN0L3RnbGgtYXBwLWxpdmluZy90Z2xoLWFwcC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZGVmaW5lUHJvcGVydHkiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgc3RvcmUgZnJvbSAnLi4vLi4vc3RvcmUvaW5kZXguanMnOwppbXBvcnQgQWVzIGZyb20gJy4uLy4uL3V0aWxzL2Flcy5qcyc7CmltcG9ydCBBcGkgZnJvbSAnQC9hcGkvbG9naW4vbG9naW4uanMnOwpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgQWVzOiBBZXMKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICB2YXIgX3JlZjsKCiAgICByZXR1cm4gX3JlZiA9IHsKICAgICAgTW9kYWxUZXh0OiAnJywKICAgICAgY29uZmlybVRpcHNWaXNpYmxlOiBmYWxzZSwKICAgICAgY29uZmlybVRpcHNMb2FkaW5nOiBmYWxzZQogICAgfSwgX2RlZmluZVByb3BlcnR5KF9yZWYsICJNb2RhbFRleHQiLCAnJyksIF9kZWZpbmVQcm9wZXJ0eShfcmVmLCAiaXNTdWNjZXNzIiwgdHJ1ZSksIF9yZWY7CiAgfSwKICBiZWZvcmVDcmVhdGU6IGZ1bmN0aW9uIGJlZm9yZUNyZWF0ZSgpIHsKICAgIHRoaXMuZm9ybSA9IHRoaXMuJGZvcm0uY3JlYXRlRm9ybSh0aGlzLCB7CiAgICAgIG5hbWU6ICdub3JtYWxfbG9naW4nCiAgICB9KTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGhhbmRsZVN1Ym1pdDogZnVuY3Rpb24gaGFuZGxlU3VibWl0KGUpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgdmFyIHRoYXQgPSB0aGlzOwogICAgICB0aGlzLmZvcm0udmFsaWRhdGVGaWVsZHMoZnVuY3Rpb24gKGVyciwgdmFsdWVzKSB7CiAgICAgICAgaWYgKCFlcnIpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCdSZWNlaXZlZCB2YWx1ZXMgb2YgZm9ybTogJywgdmFsdWVzKTsKICAgICAgICAgIHZhciBkYXRhID0gewogICAgICAgICAgICB1c2VyTmFtZTogdmFsdWVzLnVzZXJOYW1lLAogICAgICAgICAgICBwYXNzV29yZDogdmFsdWVzLnBhc3NXb3JkCiAgICAgICAgICB9OwogICAgICAgICAgdmFyIHBhdGggPSBfdGhpcy4kc3RvcmUuc3RhdGUuY29uZmlnLmdsb2JhbFBhdGg7CiAgICAgICAgICB2YXIgZW5jX2FmdGVyID0gQWVzLmVuY3J5cHQoZGF0YSk7CiAgICAgICAgICB2YXIgZ2xvYmFsc3RhdGUgPSB0aGF0LiRzdG9yZS5zdGF0ZTsKICAgICAgICAgIHZhciBnbG9iYWxQYXRoID0gdGhhdC4kc3RvcmUuc3RhdGUuY29uZmlnLmdsb2JhbFBhdGg7CiAgICAgICAgICB2YXIgcGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcygpOwogICAgICAgICAgcGFyYW1zLmFwcGVuZCgnYWVzRGF0YScsIGVuY19hZnRlcik7CgogICAgICAgICAgX3RoaXMuJGF4aW9zKHsKICAgICAgICAgICAgbWV0aG9kOiAncG9zdCcsCiAgICAgICAgICAgIHVybDogcGF0aCArICcvand0L2xvZ2luJywKICAgICAgICAgICAgZGF0YTogcGFyYW1zCiAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7CgogICAgICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5pc1N1Y2Nlc3MgPT09IGZhbHNlKSB7CiAgICAgICAgICAgICAgdGhhdC5pc1N1Y2Nlc3MgPSBmYWxzZTsKICAgICAgICAgICAgICB0aGF0LmNvbmZpcm1UaXBzVmlzaWJsZSA9IHRydWU7CiAgICAgICAgICAgICAgdGhhdC5Nb2RhbFRleHQgPSAn55So5oi35ZCN5oiW5a+G56CB6ZSZ6K+vLOivt+mHjeaWsOeZu+W9lSc7IC8vIHRoYXQuJHJvdXRlci5wdXNoKCcvbG9naW4nKQogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHRoYXQuaXNTdWNjZXNzID0gdHJ1ZTsKICAgICAgICAgICAgICB0aGF0LmNvbmZpcm1UaXBzVmlzaWJsZSA9IHRydWU7CiAgICAgICAgICAgICAgdGhhdC5Nb2RhbFRleHQgPSAn55m76ZmG5oiQ5YqfLOeCueWHu+ehruWumue7p+e7rSc7CiAgICAgICAgICAgICAgdGhhdC4kc3RvcmUuY29tbWl0KCdjaGFuZ2VMb2dpbicsIHsKICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IHJlc3BvbnNlLmRhdGEuY29udGVudC50b2tlbgogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIHRoYXQuJHJvdXRlci5wdXNoKCcvaW5kZXgnKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgUmVnaXN0OiBmdW5jdGlvbiBSZWdpc3QoKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvUmVnaXN0Jyk7CiAgICB9LAogICAgaGFuZGxlQ29uZmlybVRpcHNPazogZnVuY3Rpb24gaGFuZGxlQ29uZmlybVRpcHNPaygpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB0aGlzLk1vZGFsVGV4dCA9ICcnOwogICAgICB0aGlzLmNvbmZpcm1Mb2FkaW5nID0gdHJ1ZTsKICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMyLmNvbmZpcm1UaXBzVmlzaWJsZSA9IGZhbHNlOwogICAgICAgIF90aGlzMi5jb25maXJtVGlwc0xvYWRpbmcgPSBmYWxzZTsKICAgICAgfSwgMTAwKTsKICAgIH0sCiAgICBoYW5kbGVDb25maXJtVGlwc0NhbmNlbDogZnVuY3Rpb24gaGFuZGxlQ29uZmlybVRpcHNDYW5jZWwoKSB7CiAgICAgIGNvbnNvbGUubG9nKCfngrnlh7vlj5bmtojmjInpkq4uLi4uLi4uLicpOwogICAgICB0aGlzLmNvbmZpcm1UaXBzVmlzaWJsZSA9IGZhbHNlOwogICAgfQogIH0KfTs="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n <div class=\"LoginBody\">\r\n   <div class=\"BackGround\"></div>\r\n    <a-layout>\r\n      <a-layout-header class=\"LayoutHeader\"></a-layout-header>\r\n      <a-layout-content class=\"LayoutContent\">\r\n        <div class=\"LoginForm\">\r\n          <br>\r\n          <h2 class=\"title\">隐患上报管理系统</h2>\r\n          <br>\r\n          <a-form\r\n            id=\"components-form-demo-normal-login\"\r\n            :form=\"form\"\r\n            class=\"Login-Form\"\r\n            @submit=\"handleSubmit\"\r\n          >\r\n            <a-form-item>\r\n              <a-input\r\n                v-decorator=\"[\r\n                  'userName',\r\n                  { rules: [{ required: true, message: '用户名不能为空!' }] },\r\n                ]\"\r\n                placeholder=\"请输入用户名\"\r\n              >\r\n                <a-icon slot=\"prefix\" type=\"user\" style=\"color: rgba(24,144,255,95)\" />\r\n              </a-input>\r\n            </a-form-item>\r\n            <a-form-item>\r\n              <a-input\r\n                v-decorator=\"[\r\n                  'passWord',\r\n                  { rules: [{ required: true, message: '密码不能为空!' }] },\r\n                ]\"\r\n                type=\"password\"\r\n                placeholder=\"请输入密码\"\r\n              >\r\n                <a-icon slot=\"prefix\" type=\"lock\" style=\"color: rgba(24,144,255,95)\" />\r\n              </a-input>\r\n            </a-form-item>\r\n            <a-form-item>\r\n              <!-- <a-checkbox\r\n                v-decorator=\"[\r\n                  'remember',\r\n                  {\r\n                    valuePropName: 'checked',\r\n                    initialValue: true,\r\n                  },\r\n                ]\"\r\n              >\r\n                记住密码\r\n              </a-checkbox>\r\n              <a class=\"login-form-forgot\" href=\"\">\r\n                忘记密码\r\n              </a> -->\r\n              <a-button type=\"primary\" html-type=\"submit\" class=\"login-form-button\">\r\n                登录\r\n              </a-button>            \r\n              <!-- <a @click=\"Regist()\">\r\n                立即注册\r\n              </a> -->\r\n            </a-form-item>\r\n          </a-form>\r\n        </div>\r\n         <a-modal\r\n          title=\"提示\"\r\n          :visible=\"confirmTipsVisible\"\r\n          :confirm-loading=\"confirmTipsLoading\"\r\n          @ok=\"handleConfirmTipsOk\"\r\n          @cancel=\"handleConfirmTipsCancel\"\r\n        >\r\n      <p>{{ ModalText }}</p>\r\n    </a-modal>\r\n      </a-layout-content>\r\n      <a-layout-footer class=\"LayoutFooter\"></a-layout-footer>\r\n    </a-layout>\r\n </div>\r\n</template>\r\n\r\n<script>\r\nimport store from '../../store/index.js'\r\nimport Aes from '../../utils/aes.js'\r\nimport Api from '@/api/login/login.js'\r\nexport default {\r\n  components:{\r\n    Aes\r\n  },\r\n  data(){\r\n       return {\r\n          ModalText: '',\r\n          confirmTipsVisible: false,\r\n          confirmTipsLoading: false,\r\n          ModalText:'',\r\n          isSuccess:true\r\n       }\r\n  },\r\n  beforeCreate() {\r\n    this.form = this.$form.createForm(this, { name: 'normal_login' });\r\n  },\r\n  methods: {\r\n    handleSubmit(e) {\r\n      e.preventDefault();\r\n      var that = this;\r\n      this.form.validateFields((err, values) => {\r\n        if (!err) {\r\n          console.log('Received values of form: ', values);\r\n          let data = {\r\n                       userName: values.userName,\r\n                       passWord: values.passWord\r\n          }\r\n          let path =this.$store.state.config.globalPath\r\n          let enc_after = Aes.encrypt(data);\r\n          let globalstate = that.$store.state;\r\n          let globalPath = that.$store.state.config.globalPath;\r\n          let params = new URLSearchParams();\r\n          params.append('aesData', enc_after);\r\n\r\n      \r\n          this.$axios({\r\n            method: 'post',\r\n            url:  path+'/jwt/login',\r\n            data:params\r\n          }).then(function (response) {\r\n            console.log(response);\r\n            if(response.data.isSuccess === false){\r\n              that.isSuccess = false\r\n              that.confirmTipsVisible = true\r\n              that.ModalText = '用户名或密码错误,请重新登录'\r\n              // that.$router.push('/login')\r\n            }else{\r\n              that.isSuccess = true\r\n              that.confirmTipsVisible = true\r\n              that.ModalText = '登陆成功,点击确定继续'\r\n              that.$store.commit('changeLogin',{Authorization:response.data.content.token})\r\n              that.$router.push('/index')\r\n            }\r\n          }).catch(function (error) {\r\n              console.log(error);\r\n          })\r\n         \r\n          \r\n        }\r\n      });\r\n    },\r\n    Regist(){\r\n      this.$router.push('/Regist')\r\n    },\r\n    handleConfirmTipsOk(){\r\n        this.ModalText = '';\r\n        this.confirmLoading = true;\r\n        setTimeout(() => {\r\n          this.confirmTipsVisible = false;\r\n          this.confirmTipsLoading = false;\r\n        }, 100);\r\n    },\r\n    handleConfirmTipsCancel(){\r\n      console.log('点击取消按钮........')\r\n      this.confirmTipsVisible = false\r\n    }\r\n  },\r\n};\r\n</script>\r\n<style lang=\"scss\" >\r\n#components-form-demo-normal-login .login-form {\r\n  max-width: 300px;\r\n}\r\n#components-form-demo-normal-login .login-form-forgot {\r\n  float: right;\r\n}\r\n#components-form-demo-normal-login .login-form-button {\r\n  width: 100%;\r\n}\r\n.title{\r\n  font-size: 22px;\r\n\ttext-align: center;\r\n  text-shadow: blue($color:blue);\r\n}\r\n.LayoutHeader{\r\n  width: 100%;\r\n  height:190px !important;\r\n  background-color:white !important; \r\n}\r\n.LayoutContent{\r\n  background-color: white;\r\n}\r\n.LayoutFooter{\r\n  background-color: white !important;\r\n}\r\n.LoginForm{\r\n  width: 25%;\r\n  margin:0 auto;\r\n  background-color: white;\r\n  position: relative;\r\n\toverflow: hidden;\r\n  border-radius: 17px;\r\n  height: 300px !important;\r\n  box-shadow:2px 2px 10px gray;\r\n}\r\n.Login-Form{\r\n  width: 80%;\r\n  margin: 0 auto !important;\r\n}\r\n.LoginBody{\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n.BackGround{\r\n\tdisplay: block;\r\n\tposition: absolute;\r\n\tz-index: 0;\r\n\tleft: 0;\r\n\ttop: 0;\r\n\twidth: 100%;\r\n\theight: 100%;\r\n\tbackground: url(../../assets/login-bg.jpg) no-repeat;\r\n\tbackground-size: cover;\r\n}\r\n</style>"],"sourceRoot":"src/components/Login"}]}