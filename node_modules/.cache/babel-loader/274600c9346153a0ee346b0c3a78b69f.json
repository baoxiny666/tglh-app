{"remainingRequest":"E:\\VueProject\\tglh-app\\node_modules\\babel-loader\\lib\\index.js!E:\\VueProject\\tglh-app\\src\\interceptor\\interceptor.js","dependencies":[{"path":"E:\\VueProject\\tglh-app\\src\\interceptor\\interceptor.js","mtime":1610016915106},{"path":"E:\\VueProject\\tglh-app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500371},{"path":"E:\\VueProject\\tglh-app\\node_modules\\babel-loader\\lib\\index.js","mtime":315532801399}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmcuanMiOwoKdmFyIF90aGlzID0gdGhpczsKCmltcG9ydCBWdWUgZnJvbSAndnVlJzsKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0IGZ1bmMgZnJvbSAnLi4vY29uZmlnL2luZGV4LmpzJzsKaW1wb3J0IHN0b3JlIGZyb20gJy4uL3N0b3JlL2luZGV4LmpzJzsgLy8g5oum5oiqcmVxdWVzdCzorr7nva7lhajlsYDor7fmsYLkuLphamF46K+35rGCCgpheGlvcy5pbnRlcmNlcHRvcnMucmVxdWVzdC51c2UoZnVuY3Rpb24gKGNvbmZpZykgewogIGNvbmZpZy5oZWFkZXJzWyd0aW1lJ10gPSBuZXcgRGF0ZSgpLmdldFRpbWUoKS50b1N0cmluZygpOwogIGNvbnNvbGUubG9nKHN0b3JlLnN0YXRlKTsKCiAgdmFyIF9zaWduID0gZnVuYy5zaWduRW5jcnlwdChzdG9yZS5zdGF0ZS5jb25maWcuc2lnbktleSArIGNvbmZpZy5oZWFkZXJzWyd0aW1lJ10pOwoKICBjb25maWcuaGVhZGVyc1snc2lnbiddID0gX3NpZ247CiAgY29uZmlnLmhlYWRlcnNbJ1gtUmVxdWVzdGVkLVdpdGgnXSA9ICdYTUxIdHRwUmVxdWVzdCc7CiAgY29uZmlnLmhlYWRlcnNbJ0F1dGhvcml6YXRpb24nXSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdBdXRob3JpemF0aW9uJyk7CiAgcmV0dXJuIGNvbmZpZzsKfSk7CmF4aW9zLmludGVyY2VwdG9ycy5yZXNwb25zZS51c2UoZnVuY3Rpb24gKHJlcykgewogIHZhciBjb2RlID0gcmVzLmRhdGEuY29kZTsKICB2YXIgdGhhdCA9IF90aGlzOwoKICBpZiAoY29kZSA9PT0gNDA3KSB7CiAgICAvLyAyLiDliKDpmaTmnKzlnLB0b2tlbiDlkowgdXNlcl9pZAogICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ0F1dGhvcml6YXRpb24nKTsgLy8gMy4g6Lez6L2sIGxvZ2luCiAgICAvLyByb3V0ZXIucHVzaCgnL2xvZ2luJykKCiAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICIvIjsKICB9CgogIHJldHVybiByZXM7Cn0pOyAvLyBheGlvcy5pbnN0YWxsID0gKFZ1ZSkgPT4gewovLyAgIFZ1ZS5wcm90b3R5cGUuJGF4aW9zID0gYXhpb3MKLy8gfQoKZXhwb3J0IGRlZmF1bHQgYXhpb3M7"},{"version":3,"sources":["E:/VueProject/tglh-app/src/interceptor/interceptor.js"],"names":["Vue","axios","func","store","interceptors","request","use","config","headers","Date","getTime","toString","console","log","state","_sign","signEncrypt","signKey","localStorage","getItem","response","res","code","data","that","removeItem","window","location","href"],"mappings":";;;;;AAAA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,IAAP,MAAiB,oBAAjB;AACA,OAAOC,KAAP,MAAkB,mBAAlB,C,CAEA;;AACAF,KAAK,CAACG,YAAN,CAAmBC,OAAnB,CAA2BC,GAA3B,CAA+B,UAACC,MAAD,EAAY;AACzCA,EAAAA,MAAM,CAACC,OAAP,CAAe,MAAf,IAAyB,IAAIC,IAAJ,GAAWC,OAAX,GAAqBC,QAArB,EAAzB;AACAC,EAAAA,OAAO,CAACC,GAAR,CAAYV,KAAK,CAACW,KAAlB;;AACA,MAAIC,KAAK,GAAGb,IAAI,CAACc,WAAL,CAAiBb,KAAK,CAACW,KAAN,CAAYP,MAAZ,CAAmBU,OAAnB,GAA6BV,MAAM,CAACC,OAAP,CAAe,MAAf,CAA9C,CAAZ;;AACAD,EAAAA,MAAM,CAACC,OAAP,CAAe,MAAf,IAAyBO,KAAzB;AACAR,EAAAA,MAAM,CAACC,OAAP,CAAe,kBAAf,IAAqC,gBAArC;AACAD,EAAAA,MAAM,CAACC,OAAP,CAAe,eAAf,IAAkCU,YAAY,CAACC,OAAb,CAAqB,eAArB,CAAlC;AACA,SAAOZ,MAAP;AACD,CARD;AAYAN,KAAK,CAACG,YAAN,CAAmBgB,QAAnB,CAA4Bd,GAA5B,CAAgC,UAAAe,GAAG,EAAI;AAAA,MAC7BC,IAD6B,GACpBD,GAAG,CAACE,IADgB,CAC7BD,IAD6B;AAErC,MAAIE,IAAI,GAAG,KAAX;;AAEA,MAAIF,IAAI,KAAK,GAAb,EAAkB;AAChB;AACAJ,IAAAA,YAAY,CAACO,UAAb,CAAwB,eAAxB,EAFgB,CAIhB;AACA;;AACAC,IAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuB,GAAvB;AACD;;AACD,SAAOP,GAAP;AACD,CAbD,E,CAgBA;AACA;AACA;;AAEA,eAAepB,KAAf","sourcesContent":["import Vue from 'vue'\r\nimport axios from 'axios'\r\nimport func from '../config/index.js'\r\nimport store from '../store/index.js'\r\n\r\n// 拦截request,设置全局请求为ajax请求\r\naxios.interceptors.request.use((config) => {\r\n  config.headers['time'] = new Date().getTime().toString()\r\n  console.log(store.state)\r\n  let _sign = func.signEncrypt(store.state.config.signKey + config.headers['time'])\r\n  config.headers['sign'] = _sign\r\n  config.headers['X-Requested-With'] = 'XMLHttpRequest'\r\n  config.headers['Authorization'] = localStorage.getItem('Authorization')\r\n  return config\r\n})\r\n\r\n\r\n\r\naxios.interceptors.response.use(res => {\r\n  const { code } = res.data\r\n  let that = this\r\n  \r\n  if (code === 407) {\r\n    // 2. 删除本地token 和 user_id\r\n    localStorage.removeItem('Authorization')\r\n\r\n    // 3. 跳转 login\r\n    // router.push('/login')\r\n    window.location.href = \"/\"\r\n  }\r\n  return res\r\n})\r\n\r\n \r\n// axios.install = (Vue) => {\r\n//   Vue.prototype.$axios = axios\r\n// }\r\n \r\nexport default axios"]}]}