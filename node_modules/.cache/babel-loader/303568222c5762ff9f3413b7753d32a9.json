{"remainingRequest":"E:\\VueProject\\tglh-app\\node_modules\\babel-loader\\lib\\index.js!E:\\VueProject\\tglh-app\\src\\interceptor\\interceptor.js","dependencies":[{"path":"E:\\VueProject\\tglh-app\\src\\interceptor\\interceptor.js","mtime":1609760826646},{"path":"E:\\VueProject\\tglh-app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500371},{"path":"E:\\VueProject\\tglh-app\\node_modules\\babel-loader\\lib\\index.js","mtime":315532801399}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIF90aGlzID0gdGhpczsKCmltcG9ydCBWdWUgZnJvbSAndnVlJzsKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsgLy8g5oum5oiqcmVxdWVzdCzorr7nva7lhajlsYDor7fmsYLkuLphamF46K+35rGCCgpheGlvcy5pbnRlcmNlcHRvcnMucmVxdWVzdC51c2UoZnVuY3Rpb24gKGNvbmZpZykgewogIGNvbmZpZy5oZWFkZXJzWydYLVJlcXVlc3RlZC1XaXRoJ10gPSAnWE1MSHR0cFJlcXVlc3QnOwogIGNvbmZpZy5oZWFkZXJzWydBdXRob3JpemF0aW9uJ10gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnQXV0aG9yaXphdGlvbicpOwogIHJldHVybiBjb25maWc7Cn0pOwpheGlvcy5pbnRlcmNlcHRvcnMucmVzcG9uc2UudXNlKGZ1bmN0aW9uIChyZXMpIHsKICB2YXIgY29kZSA9IHJlcy5kYXRhLmNvZGU7CiAgdmFyIHRoYXQgPSBfdGhpczsKICBkZWJ1Z2dlcjsKCiAgaWYgKGNvZGUgPT09IDQwNykgewogICAgLy8gMi4g5Yig6Zmk5pys5ZywdG9rZW4g5ZKMIHVzZXJfaWQKICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdBdXRob3JpemF0aW9uJyk7IC8vIDMuIOi3s+i9rCBsb2dpbgogICAgLy8gcm91dGVyLnB1c2goJy9sb2dpbicpCgogICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAiL2xvZ2luIjsKICB9CgogIHJldHVybiByZXM7Cn0pOwoKYXhpb3MuaW5zdGFsbCA9IGZ1bmN0aW9uIChWdWUpIHsKICBWdWUucHJvdG90eXBlLiRheGlvcyA9IGF4aW9zOwp9OwoKZXhwb3J0IGRlZmF1bHQgYXhpb3M7"},{"version":3,"sources":["E:/VueProject/tglh-app/src/interceptor/interceptor.js"],"names":["Vue","axios","interceptors","request","use","config","headers","localStorage","getItem","response","res","code","data","that","removeItem","window","location","href","install","prototype","$axios"],"mappings":";;AAAA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,KAAP,MAAkB,OAAlB,C,CAEA;;AACAA,KAAK,CAACC,YAAN,CAAmBC,OAAnB,CAA2BC,GAA3B,CAA+B,UAACC,MAAD,EAAY;AACzCA,EAAAA,MAAM,CAACC,OAAP,CAAe,kBAAf,IAAqC,gBAArC;AACAD,EAAAA,MAAM,CAACC,OAAP,CAAe,eAAf,IAAkCC,YAAY,CAACC,OAAb,CAAqB,eAArB,CAAlC;AACA,SAAOH,MAAP;AACD,CAJD;AAOAJ,KAAK,CAACC,YAAN,CAAmBO,QAAnB,CAA4BL,GAA5B,CAAgC,UAAAM,GAAG,EAAI;AAAA,MAC7BC,IAD6B,GACpBD,GAAG,CAACE,IADgB,CAC7BD,IAD6B;AAErC,MAAIE,IAAI,GAAG,KAAX;AACA;;AACA,MAAIF,IAAI,KAAK,GAAb,EAAkB;AAGhB;AACAJ,IAAAA,YAAY,CAACO,UAAb,CAAwB,eAAxB,EAJgB,CAMhB;AACA;;AACAC,IAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuB,QAAvB;AACD;;AACD,SAAOP,GAAP;AACD,CAfD;;AAkBAT,KAAK,CAACiB,OAAN,GAAgB,UAAClB,GAAD,EAAS;AACvBA,EAAAA,GAAG,CAACmB,SAAJ,CAAcC,MAAd,GAAuBnB,KAAvB;AACD,CAFD;;AAIA,eAAeA,KAAf","sourcesContent":["import Vue from 'vue'\r\nimport axios from 'axios'\r\n\r\n// 拦截request,设置全局请求为ajax请求\r\naxios.interceptors.request.use((config) => {\r\n  config.headers['X-Requested-With'] = 'XMLHttpRequest'\r\n  config.headers['Authorization'] = localStorage.getItem('Authorization')\r\n  return config\r\n})\r\n\r\n\r\naxios.interceptors.response.use(res => {\r\n  const { code } = res.data\r\n  let that = this\r\n  debugger\r\n  if (code === 407) {\r\n \r\n\r\n    // 2. 删除本地token 和 user_id\r\n    localStorage.removeItem('Authorization')\r\n\r\n    // 3. 跳转 login\r\n    // router.push('/login')\r\n    window.location.href = \"/login\"\r\n  }\r\n  return res\r\n})\r\n\r\n \r\naxios.install = (Vue) => {\r\n  Vue.prototype.$axios = axios\r\n}\r\n \r\nexport default axios"]}]}