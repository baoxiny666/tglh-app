{"remainingRequest":"E:\\VueProject\\tglh-app-living\\tglh-app\\node_modules\\babel-loader\\lib\\index.js!E:\\VueProject\\tglh-app-living\\tglh-app\\src\\interceptor\\interceptor.js","dependencies":[{"path":"E:\\VueProject\\tglh-app-living\\tglh-app\\src\\interceptor\\interceptor.js","mtime":1610417753046},{"path":"E:\\VueProject\\tglh-app-living\\tglh-app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1610417723000},{"path":"E:\\VueProject\\tglh-app-living\\tglh-app\\node_modules\\babel-loader\\lib\\index.js","mtime":1610417721066}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmcuanMiOwoKdmFyIF90aGlzID0gdGhpczsKCmltcG9ydCBWdWUgZnJvbSAndnVlJzsKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0IGZ1bmMgZnJvbSAnLi4vY29uZmlnL2luZGV4LmpzJzsKaW1wb3J0IHN0b3JlIGZyb20gJy4uL3N0b3JlL2luZGV4LmpzJzsgLy8g5oum5oiqcmVxdWVzdCzorr7nva7lhajlsYDor7fmsYLkuLphamF46K+35rGCCgpheGlvcy5pbnRlcmNlcHRvcnMucmVxdWVzdC51c2UoZnVuY3Rpb24gKGNvbmZpZykgewogIGNvbmZpZy5oZWFkZXJzWyd0aW1lJ10gPSBuZXcgRGF0ZSgpLmdldFRpbWUoKS50b1N0cmluZygpOwoKICB2YXIgX3NpZ24gPSBmdW5jLnNpZ25FbmNyeXB0KHN0b3JlLnN0YXRlLmNvbmZpZy5zaWduS2V5ICsgY29uZmlnLmhlYWRlcnNbJ3RpbWUnXSk7CgogIGNvbmZpZy5oZWFkZXJzWydzaWduJ10gPSBfc2lnbjsKICBjb25maWcuaGVhZGVyc1snWC1SZXF1ZXN0ZWQtV2l0aCddID0gJ1hNTEh0dHBSZXF1ZXN0JzsKICBjb25maWcuaGVhZGVyc1snQXV0aG9yaXphdGlvbiddID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oJ0F1dGhvcml6YXRpb24nKTsKICByZXR1cm4gY29uZmlnOwp9KTsKYXhpb3MuaW50ZXJjZXB0b3JzLnJlc3BvbnNlLnVzZShmdW5jdGlvbiAocmVzKSB7CiAgdmFyIGNvZGUgPSByZXMuZGF0YS5jb2RlOwogIHZhciB0aGF0ID0gX3RoaXM7CgogIGlmIChjb2RlID09PSA0MDcpIHsKICAgIC8vIDIuIOWIoOmZpOacrOWcsHRva2VuIOWSjCB1c2VyX2lkCiAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbSgnQXV0aG9yaXphdGlvbicpOyAvLyAzLiDot7PovawgbG9naW4KICAgIC8vIHJvdXRlci5wdXNoKCcvbG9naW4nKQoKICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gIi8iOwogIH0KCiAgcmV0dXJuIHJlczsKfSk7IC8vIGF4aW9zLmluc3RhbGwgPSAoVnVlKSA9PiB7Ci8vICAgVnVlLnByb3RvdHlwZS4kYXhpb3MgPSBheGlvcwovLyB9CgpleHBvcnQgZGVmYXVsdCBheGlvczs="},{"version":3,"sources":["E:/VueProject/tglh-app-living/tglh-app/src/interceptor/interceptor.js"],"names":["Vue","axios","func","store","interceptors","request","use","config","headers","Date","getTime","toString","_sign","signEncrypt","state","signKey","localStorage","getItem","response","res","code","data","that","removeItem","window","location","href"],"mappings":";;;;;AAAA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,IAAP,MAAiB,oBAAjB;AACA,OAAOC,KAAP,MAAkB,mBAAlB,C,CAEA;;AACAF,KAAK,CAACG,YAAN,CAAmBC,OAAnB,CAA2BC,GAA3B,CAA+B,UAACC,MAAD,EAAY;AACzCA,EAAAA,MAAM,CAACC,OAAP,CAAe,MAAf,IAAyB,IAAIC,IAAJ,GAAWC,OAAX,GAAqBC,QAArB,EAAzB;;AACA,MAAIC,KAAK,GAAGV,IAAI,CAACW,WAAL,CAAiBV,KAAK,CAACW,KAAN,CAAYP,MAAZ,CAAmBQ,OAAnB,GAA6BR,MAAM,CAACC,OAAP,CAAe,MAAf,CAA9C,CAAZ;;AACAD,EAAAA,MAAM,CAACC,OAAP,CAAe,MAAf,IAAyBI,KAAzB;AACAL,EAAAA,MAAM,CAACC,OAAP,CAAe,kBAAf,IAAqC,gBAArC;AACAD,EAAAA,MAAM,CAACC,OAAP,CAAe,eAAf,IAAkCQ,YAAY,CAACC,OAAb,CAAqB,eAArB,CAAlC;AACA,SAAOV,MAAP;AACD,CAPD;AAWAN,KAAK,CAACG,YAAN,CAAmBc,QAAnB,CAA4BZ,GAA5B,CAAgC,UAAAa,GAAG,EAAI;AAAA,MAC7BC,IAD6B,GACpBD,GAAG,CAACE,IADgB,CAC7BD,IAD6B;AAErC,MAAIE,IAAI,GAAG,KAAX;;AAEA,MAAIF,IAAI,KAAK,GAAb,EAAkB;AAChB;AACAJ,IAAAA,YAAY,CAACO,UAAb,CAAwB,eAAxB,EAFgB,CAIhB;AACA;;AACAC,IAAAA,MAAM,CAACC,QAAP,CAAgBC,IAAhB,GAAuB,GAAvB;AACD;;AACD,SAAOP,GAAP;AACD,CAbD,E,CAgBA;AACA;AACA;;AAEA,eAAelB,KAAf","sourcesContent":["import Vue from 'vue'\r\nimport axios from 'axios'\r\nimport func from '../config/index.js'\r\nimport store from '../store/index.js'\r\n\r\n// 拦截request,设置全局请求为ajax请求\r\naxios.interceptors.request.use((config) => {\r\n  config.headers['time'] = new Date().getTime().toString()\r\n  let _sign = func.signEncrypt(store.state.config.signKey + config.headers['time'])\r\n  config.headers['sign'] = _sign\r\n  config.headers['X-Requested-With'] = 'XMLHttpRequest'\r\n  config.headers['Authorization'] = localStorage.getItem('Authorization')\r\n  return config\r\n})\r\n\r\n\r\n\r\naxios.interceptors.response.use(res => {\r\n  const { code } = res.data\r\n  let that = this\r\n  \r\n  if (code === 407) {\r\n    // 2. 删除本地token 和 user_id\r\n    localStorage.removeItem('Authorization')\r\n\r\n    // 3. 跳转 login\r\n    // router.push('/login')\r\n    window.location.href = \"/\"\r\n  }\r\n  return res\r\n})\r\n\r\n \r\n// axios.install = (Vue) => {\r\n//   Vue.prototype.$axios = axios\r\n// }\r\n \r\nexport default axios"]}]}