{"remainingRequest":"E:\\VueProject\\tglh-app-living\\tglh-app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\VueProject\\tglh-app-living\\tglh-app\\src\\components\\Layout\\DataSelect.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\VueProject\\tglh-app-living\\tglh-app\\src\\components\\Layout\\DataSelect.vue","mtime":1610448123271},{"path":"E:\\VueProject\\tglh-app-living\\tglh-app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1610417723000},{"path":"E:\\VueProject\\tglh-app-living\\tglh-app\\node_modules\\babel-loader\\lib\\index.js","mtime":1610417721066},{"path":"E:\\VueProject\\tglh-app-living\\tglh-app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1610417723000},{"path":"E:\\VueProject\\tglh-app-living\\tglh-app\\node_modules\\vue-loader\\lib\\index.js","mtime":1610417751528}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBDb2x1bW4gfSBmcm9tICdAYW50di9nMnBsb3QnOw0KDQppbXBvcnQgeyBQaWUgfSBmcm9tICdAYW50di9nMnBsb3QnOw0KaW1wb3J0IHN0b3JlIGZyb20gJy4uLy4uL3N0b3JlL2luZGV4LmpzJw0KaW1wb3J0IEFlcyBmcm9tICcuLi8uLi91dGlscy9hZXMuanMnDQppbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCc7DQppbXBvcnQgbG9jYWxlIGZyb20gJ2FudC1kZXNpZ24tdnVlL2VzL2xvY2FsZS96aF9DTicNCmltcG9ydCAibW9tZW50L2xvY2FsZS96aC1jbiINCmV4cG9ydCBkZWZhdWx0IHsNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgZmxhZzowLA0KICAgICAgZGF0ZUZvcm1hdDogJ1lZWVkvTU0vREQnLA0KICAgICAgbW9udGhGb3JtYXQ6ICdZWVlZL01NJywNCiAgICAgIHN0YXJ0X3RpbWU6JycsDQogICAgICBlbmRfdGltZTonJywNCiAgICAgIHN0YXR1czonJywNCiAgICAgIHNiczonLTEnLA0KICAgICAgY2xzOiczJywNCiAgICAgIHdjbDonMScsDQogICAgICBwaWVDaGFydHNEYXRhOltdLA0KICAgICAgY29sdW1uQ2hhcnRzRGF0YTpbXSwNCiAgICAgIGNvbFBsb3Q6e30sDQogICAgICBwaWVQbG90Ont9DQogICAgfTsNCiAgfSwNCiAgY29tcG9uZW50czp7DQogICAgICANCg0KICB9LA0KICBtZXRob2RzOiB7DQogICAgbW9tZW50LA0KICAgIA0KICAgIG9uQ2hhbmdlKGRhdGVzLCBkYXRlU3RyaW5ncykgew0KICAgICAgdGhpcy5zdGFydF90aW1lID0gZGF0ZVN0cmluZ3NbMF0NCiAgICAgIHRoaXMuZW5kX3RpbWUgPSBkYXRlU3RyaW5nc1sxXQ0KICAgICAgdGhpcy5kYXRhQ2hhcnRzQXBpKCJkYXRlIikNCiAgICB9LA0KICAgIGhhbmRsZUNoYW5nZSh2YWx1ZSkgew0KICAgICANCiAgICB9LA0KICAgIHNlbGVjdDEoKXsNCiAgICAgIHRoaXMuc3RhdHVzID0gICIiDQogICAgICB0aGlzLmRhdGFDaGFydHNBcGkoInNlbGVjdDEiKQ0KICAgIH0sDQogICAgc2VsZWN0Migpew0KICAgICAgdGhpcy5zdGF0dXMgPSAgdGhpcy5jbHMNCiAgICAgIHRoaXMuZGF0YUNoYXJ0c0FwaSgic2VsZWN0MiIpDQogICAgfSwNCiAgICBzZWxlY3QzKCl7DQogICAgICB0aGlzLnN0YXR1cyA9ICB0aGlzLndjbA0KICAgICAgdGhpcy5kYXRhQ2hhcnRzQXBpKCJzZWxlY3QzIikNCiAgICB9LA0KICAgIGRhdGFDaGFydHNBcGkocGFyYW1zKXsNCiAgICAgIGxldCBkYXRhDQogICAgICBsZXQgdGhhdCA9IHRoaXMNCiAgICAgIGlmKHBhcmFtcyA9PSB1bmRlZmluZWQpew0KICAgICAgICBkYXRhID0gew0KICAgICAgICAgIHN0YXJ0X3RpbWU6IiIsDQogICAgICAgICAgZW5kX3RpbWU6IiIsDQogICAgICAgICAgc3RhdHVzOiIiDQogICAgICAgIH0gDQogICAgICB9ZWxzZXsNCiAgICAgICAgIGRhdGEgPSB7DQogICAgICAgICAgc3RhcnRfdGltZTp0aGlzLnN0YXJ0X3RpbWUsDQogICAgICAgICAgZW5kX3RpbWU6dGhpcy5lbmRfdGltZSwNCiAgICAgICAgICBzdGF0dXM6dGhpcy5zdGF0dXMNCiAgICAgICAgfSANCiAgICAgIH0NCiAgICAgIGxldCBlbmNfYWZ0ZXIgID0gQWVzLmVuY3J5cHQoZGF0YSk7ICAgICANCiAgICAgIGxldCB0cmFuc2ZlciA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoKTsNCiAgICAgIGxldCBwYXRoID10aGlzLiRzdG9yZS5zdGF0ZS5jb25maWcuZ2xvYmFsUGF0aA0KICAgIA0KICAgICAgdHJhbnNmZXIuYXBwZW5kKCdhZXNEYXRhJywgZW5jX2FmdGVyKTsgDQogICAgICB0aGlzLiRheGlvcyh7DQogICAgICAgICAgbWV0aG9kOiAncG9zdCcsDQogICAgICAgICAgdXJsOiBwYXRoKycvc3RhdGlzdGljL3NlbGVjdERhdGFDaGFydHMnLA0KICAgICAgICAgIGRhdGE6dHJhbnNmZXINCiAgICAgIH0pLnRoZW4oKHJlc3BvbnNlKT0+IHsNCiAgICAgICAgICB0aGF0LnBpZUNoYXJ0c0RhdGEgPSByZXNwb25zZS5kYXRhLmRhdGEucGllQ2hhcnRzOw0KICAgICAgICAgIHRoYXQuY29sdW1uQ2hhcnRzRGF0YSA9IHJlc3BvbnNlLmRhdGEuZGF0YS5jb2x1bW5DaGFydHM7DQogICAgICAgICAgDQogICAgICAgICAgaWYodGhhdC5mbGFnID09IDApew0KICAgICAgICAgICAgdGhhdC5jb2xDaGFydHMoKQ0KICAgICAgICAgICAgdGhhdC5waWVDaGFydHMoKQ0KICAgICAgICAgICAgdGhhdC5mbGFnID0gMTsNCiAgICAgICAgICB9DQogICAgICAgICANCiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgew0KICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOw0KICAgICAgfSkNCiAgICB9LGNvbENoYXJ0cygpew0KICAgICAgbGV0IHRoYXQgPSB0aGlzDQogICAgICAgICB0aGlzLmNvbFBsb3QgPSBuZXcgQ29sdW1uKCdjb2xDb250YWluZXInLHsNCiAgICAgICAgICAgIGRhdGE6dGhhdC5jb2x1bW5DaGFydHNEYXRhLA0KICAgICAgICAgICAgeEZpZWxkOiAnbmFtZScsDQogICAgICAgICAgICB5RmllbGQ6ICdudW1iZXInLA0KICAgICAgICAgICAgc2VyaWVzRmllbGQ6ICduYW1lJywNCiAgICAgICAgICAgIG1pbkNvbHVtbldpZHRoOiA1MCwNCiAgICAgICAgICAgIG1heENvbHVtbldpZHRoOiA1MCwNCiAgICAgICAgICAgIGxlZ2VuZDogew0KICAgICAgICAgICAgICBsYXlvdXQ6ICdob3Jpem9udGFsJywNCiAgICAgICAgICAgICAgcG9zaXRpb246ICd0b3AnDQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgbGFiZWw6IHsNCiAgICAgICAgICAgICAgLy8g5Y+v5omL5Yqo6YWN572uIGxhYmVsIOaVsOaNruagh+etvuS9jee9rg0KICAgICAgICAgICAgICBwb3NpdGlvbjogJ21pZGRsZScsIC8vICd0b3AnLCAnYm90dG9tJywgJ21pZGRsZScsDQogICAgICAgICAgICAgIC8vIOmFjee9ruagt+W8jw0KICAgICAgICAgICAgICBzdHlsZTogew0KICAgICAgICAgICAgICAgIGZpbGw6ICcjRkZGRkZGJywNCiAgICAgICAgICAgICAgICBvcGFjaXR5OiAxMDAsDQogICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgIGZvcm1hdHRlcih2YWx1ZSl7DQogICAgICAgICAgICAgICAgaWYodmFsdWUubnVtYmVyID09ICcwJyl7DQogICAgICAgICAgICAgICAgICB2YWx1ZSA9IDIwDQogICAgICAgICAgICAgICAgICByZXR1cm4gIjDpobkiDQogICAgICAgICAgICAgICAgfWVsc2V7DQogICAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWUubnVtYmVyKyLpobkiDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9LA0KICAgICAgICB9KQ0KICAgICAgICB0aGlzLmNvbFBsb3QucmVuZGVyKCkNCiAgICAgICAgICAgICAgDQogICAgfSwNCiAgICBwaWVDaGFydHMoKXsNCiAgICAgICAgbGV0IHRoYXQgPSB0aGlzDQogICAgICAgIHRoaXMucGllUGxvdCA9IG5ldyBQaWUoJ3BpZUNvbnRhaW5lcicsIHsNCiAgICAgICAgICAgIGFwcGVuZFBhZGRpbmc6IDEwLA0KICAgICAgICAgICAgZGF0YTp0aGF0LnBpZUNoYXJ0c0RhdGEsDQogICAgICAgICAgICBhbmdsZUZpZWxkOiAndmFsdWUnLA0KICAgICAgICAgICAgY29sb3JGaWVsZDogJ3R5cGUnLA0KICAgICAgICAgICAgcmFkaXVzOiAwLjgsDQogICAgICAgICAgICBsYWJlbDogew0KICAgICAgICAgICAgICAgIHR5cGU6ICdzcGlkZXInLA0KICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICd7bmFtZX0ge3BlcmNlbnRhZ2V9Jw0KICAgICAgICAgICAgICAgDQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgbGVnZW5kOiB7DQogICAgICAgICAgICAgICAgbGF5b3V0OiAnaG9yaXpvbnRhbCcsDQogICAgICAgICAgICAgICAgcG9zaXRpb246ICd0b3AnDQogICAgICAgICAgICB9LCAgIA0KICAgICAgICAgICAgaW50ZXJhY3Rpb25zOiBbeyB0eXBlOiAncGllLWxlZ2VuZC1hY3RpdmUnIH0sIHsgdHlwZTogJ2VsZW1lbnQtYWN0aXZlJyB9XSwNCiAgICAgICAgfSk7DQogICAgICAgIHRoaXMucGllUGxvdC5yZW5kZXIoKTsNCiAgICB9DQoNCiAgfSwNCiAgbW91bnRlZCgpew0KICAgIHRoaXMuZGF0YUNoYXJ0c0FwaSgpDQoNCiAgICANCiAgfSx3YXRjaDp7DQogICAgICBjb2x1bW5DaGFydHNEYXRhKGEsYil7DQogICAgICAgIA0KICAgICAgICB0aGlzLmNvbFBsb3QuY2hhbmdlRGF0YShhKQ0KwqDCoMKgICAgICB0aGlzLmNvbFBsb3QucmVuZGVyKCkNCiAgICAgICAgDQogICAgICB9LA0KICAgICAgcGllQ2hhcnRzRGF0YShhLGIpew0KICAgICAgICB0aGlzLnBpZVBsb3QuY2hhbmdlRGF0YShhKQ0KwqDCoMKgICAgICB0aGlzLnBpZVBsb3QucmVuZGVyKCkNCiAgICAgICANCg0KICAgICAgfQ0KICB9DQp9Ow0K"},{"version":3,"sources":["DataSelect.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6CA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA","file":"DataSelect.vue","sourceRoot":"src/components/Layout","sourcesContent":[" <template>\r\n    <a-row>\r\n      <a-col :span=\"11\" style=\"text-align:right\">\r\n        <a>请选择想要查看的数据：</a>\r\n        <a-select default-value=\"各分厂上报数\" style=\"width: 140px\">\r\n          <a-select-option :value=\"sbs\"  @click=\"select1()\">\r\n            各分厂上报数\r\n          </a-select-option>\r\n          <a-select-option :value=\"cls\" @click=\"select2()\">\r\n            各分厂处理数\r\n          </a-select-option>\r\n          <a-select-option :value=\"wcl\" @click=\"select3()\">\r\n            各分厂未处理数\r\n          </a-select-option>\r\n        </a-select>\r\n      </a-col>\r\n      <a-col :span=\"1\">\r\n\r\n      </a-col>\r\n      <a-col :span=\"12\">\r\n          <a>请选择时间范围：</a>\r\n          <a-range-picker locale={locale}\r\n            :ranges=\"{ 今日: [moment(), moment()], '本月': [moment(), moment().endOf('month')] }\"\r\n            @change=\"onChange\"\r\n          />\r\n      </a-col>\r\n    \r\n      <a-col :span=\"24\" style=\"height:40px\"></a-col>\r\n\r\n      <a-rows>\r\n        <a-col :span=\"12\">\r\n            <div id=\"colContainer\"></div>\r\n            <!-- <data-charts :colChartsData=\"chartsData\"></data-charts> -->\r\n        </a-col>\r\n\r\n        <a-col :span=\"12\">\r\n          <div id=\"pieContainer\"></div>\r\n          <!-- :pieChartsData=\"chartsData\" -->\r\n            <!-- <pie-charts :pieChartsData=\"chartsData\"></pie-charts> -->\r\n        </a-col>\r\n      </a-rows>\r\n  </a-row>\r\n  \r\n</template>\r\n<script>\r\nimport { Column } from '@antv/g2plot';\r\n\r\nimport { Pie } from '@antv/g2plot';\r\nimport store from '../../store/index.js'\r\nimport Aes from '../../utils/aes.js'\r\nimport moment from 'moment';\r\nimport locale from 'ant-design-vue/es/locale/zh_CN'\r\nimport \"moment/locale/zh-cn\"\r\nexport default {\r\n  data() {\r\n    return {\r\n      flag:0,\r\n      dateFormat: 'YYYY/MM/DD',\r\n      monthFormat: 'YYYY/MM',\r\n      start_time:'',\r\n      end_time:'',\r\n      status:'',\r\n      sbs:'-1',\r\n      cls:'3',\r\n      wcl:'1',\r\n      pieChartsData:[],\r\n      columnChartsData:[],\r\n      colPlot:{},\r\n      piePlot:{}\r\n    };\r\n  },\r\n  components:{\r\n      \r\n\r\n  },\r\n  methods: {\r\n    moment,\r\n    \r\n    onChange(dates, dateStrings) {\r\n      this.start_time = dateStrings[0]\r\n      this.end_time = dateStrings[1]\r\n      this.dataChartsApi(\"date\")\r\n    },\r\n    handleChange(value) {\r\n     \r\n    },\r\n    select1(){\r\n      this.status =  \"\"\r\n      this.dataChartsApi(\"select1\")\r\n    },\r\n    select2(){\r\n      this.status =  this.cls\r\n      this.dataChartsApi(\"select2\")\r\n    },\r\n    select3(){\r\n      this.status =  this.wcl\r\n      this.dataChartsApi(\"select3\")\r\n    },\r\n    dataChartsApi(params){\r\n      let data\r\n      let that = this\r\n      if(params == undefined){\r\n        data = {\r\n          start_time:\"\",\r\n          end_time:\"\",\r\n          status:\"\"\r\n        } \r\n      }else{\r\n         data = {\r\n          start_time:this.start_time,\r\n          end_time:this.end_time,\r\n          status:this.status\r\n        } \r\n      }\r\n      let enc_after  = Aes.encrypt(data);     \r\n      let transfer = new URLSearchParams();\r\n      let path =this.$store.state.config.globalPath\r\n    \r\n      transfer.append('aesData', enc_after); \r\n      this.$axios({\r\n          method: 'post',\r\n          url: path+'/statistic/selectDataCharts',\r\n          data:transfer\r\n      }).then((response)=> {\r\n          that.pieChartsData = response.data.data.pieCharts;\r\n          that.columnChartsData = response.data.data.columnCharts;\r\n          \r\n          if(that.flag == 0){\r\n            that.colCharts()\r\n            that.pieCharts()\r\n            that.flag = 1;\r\n          }\r\n         \r\n      }).catch(function (error) {\r\n            console.log(error);\r\n      })\r\n    },colCharts(){\r\n      let that = this\r\n         this.colPlot = new Column('colContainer',{\r\n            data:that.columnChartsData,\r\n            xField: 'name',\r\n            yField: 'number',\r\n            seriesField: 'name',\r\n            minColumnWidth: 50,\r\n            maxColumnWidth: 50,\r\n            legend: {\r\n              layout: 'horizontal',\r\n              position: 'top'\r\n            },\r\n            label: {\r\n              // 可手动配置 label 数据标签位置\r\n              position: 'middle', // 'top', 'bottom', 'middle',\r\n              // 配置样式\r\n              style: {\r\n                fill: '#FFFFFF',\r\n                opacity: 100,\r\n              },\r\n              formatter(value){\r\n                if(value.number == '0'){\r\n                  value = 20\r\n                  return \"0项\"\r\n                }else{\r\n                  return value.number+\"项\"\r\n                }\r\n                \r\n              }\r\n            },\r\n        })\r\n        this.colPlot.render()\r\n              \r\n    },\r\n    pieCharts(){\r\n        let that = this\r\n        this.piePlot = new Pie('pieContainer', {\r\n            appendPadding: 10,\r\n            data:that.pieChartsData,\r\n            angleField: 'value',\r\n            colorField: 'type',\r\n            radius: 0.8,\r\n            label: {\r\n                type: 'spider',\r\n                content: '{name} {percentage}'\r\n               \r\n            },\r\n            legend: {\r\n                layout: 'horizontal',\r\n                position: 'top'\r\n            },   \r\n            interactions: [{ type: 'pie-legend-active' }, { type: 'element-active' }],\r\n        });\r\n        this.piePlot.render();\r\n    }\r\n\r\n  },\r\n  mounted(){\r\n    this.dataChartsApi()\r\n\r\n    \r\n  },watch:{\r\n      columnChartsData(a,b){\r\n        \r\n        this.colPlot.changeData(a)\r\n        this.colPlot.render()\r\n        \r\n      },\r\n      pieChartsData(a,b){\r\n        this.piePlot.changeData(a)\r\n        this.piePlot.render()\r\n       \r\n\r\n      }\r\n  }\r\n};\r\n</script>\r\n<style lang=\"scss\">\r\n\r\n</style>"]}]}