{"remainingRequest":"E:\\VueProject\\tglh-app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\VueProject\\tglh-app\\src\\components\\Layout\\DataSelect.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\VueProject\\tglh-app\\src\\components\\Layout\\DataSelect.vue","mtime":1610348427283},{"path":"E:\\VueProject\\tglh-app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500371},{"path":"E:\\VueProject\\tglh-app\\node_modules\\babel-loader\\lib\\index.js","mtime":315532801399},{"path":"E:\\VueProject\\tglh-app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500371},{"path":"E:\\VueProject\\tglh-app\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500371}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBDb2x1bW4gfSBmcm9tICdAYW50di9nMnBsb3QnOw0KDQppbXBvcnQgeyBQaWUgfSBmcm9tICdAYW50di9nMnBsb3QnOw0KDQoNCmltcG9ydCBBZXMgZnJvbSAnLi4vLi4vdXRpbHMvYWVzLmpzJw0KaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnOw0KaW1wb3J0IGxvY2FsZSBmcm9tICdhbnQtZGVzaWduLXZ1ZS9lcy9sb2NhbGUvemhfQ04nDQppbXBvcnQgIm1vbWVudC9sb2NhbGUvemgtY24iDQpleHBvcnQgZGVmYXVsdCB7DQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIGZsYWc6MCwNCiAgICAgIGRhdGVGb3JtYXQ6ICdZWVlZL01NL0REJywNCiAgICAgIG1vbnRoRm9ybWF0OiAnWVlZWS9NTScsDQogICAgICBzdGFydF90aW1lOicnLA0KICAgICAgZW5kX3RpbWU6JycsDQogICAgICBzdGF0dXM6JycsDQogICAgICBzYnM6Jy0xJywNCiAgICAgIGNsczonMycsDQogICAgICB3Y2w6JzEnLA0KICAgICAgcGllQ2hhcnRzRGF0YTpbXSwNCiAgICAgIGNvbHVtbkNoYXJ0c0RhdGE6W10sDQogICAgICBjb2xQbG90Ont9LA0KICAgICAgcGllUGxvdDp7fQ0KICAgIH07DQogIH0sDQogIGNvbXBvbmVudHM6ew0KICAgICAgDQoNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIG1vbWVudCwNCiAgICANCiAgICBvbkNoYW5nZShkYXRlcywgZGF0ZVN0cmluZ3MpIHsNCiAgICAgIHRoaXMuc3RhcnRfdGltZSA9IGRhdGVTdHJpbmdzWzBdDQogICAgICB0aGlzLmVuZF90aW1lID0gZGF0ZVN0cmluZ3NbMV0NCiAgICAgIHRoaXMuZGF0YUNoYXJ0c0FwaSgiZGF0ZSIpDQogICAgfSwNCiAgICBoYW5kbGVDaGFuZ2UodmFsdWUpIHsNCiAgICAgIGFsZXJ0KHZhbHVlKQ0KICAgIH0sDQogICAgc2VsZWN0MSgpew0KICAgICAgdGhpcy5zdGF0dXMgPSAgIiINCiAgICAgIHRoaXMuZGF0YUNoYXJ0c0FwaSgic2VsZWN0MSIpDQogICAgfSwNCiAgICBzZWxlY3QyKCl7DQogICAgICB0aGlzLnN0YXR1cyA9ICB0aGlzLmNscw0KICAgICAgdGhpcy5kYXRhQ2hhcnRzQXBpKCJzZWxlY3QyIikNCiAgICB9LA0KICAgIHNlbGVjdDMoKXsNCiAgICAgIHRoaXMuc3RhdHVzID0gIHRoaXMud2NsDQogICAgICB0aGlzLmRhdGFDaGFydHNBcGkoInNlbGVjdDMiKQ0KICAgIH0sDQogICAgZGF0YUNoYXJ0c0FwaShwYXJhbXMpew0KICAgICAgbGV0IGRhdGENCiAgICAgIGxldCB0aGF0ID0gdGhpcw0KICAgICAgaWYocGFyYW1zID09IHVuZGVmaW5lZCl7DQogICAgICAgIGRhdGEgPSB7DQogICAgICAgICAgc3RhcnRfdGltZToiIiwNCiAgICAgICAgICBlbmRfdGltZToiIiwNCiAgICAgICAgICBzdGF0dXM6IiINCiAgICAgICAgfSANCiAgICAgIH1lbHNlew0KICAgICAgICAgZGF0YSA9IHsNCiAgICAgICAgICBzdGFydF90aW1lOnRoaXMuc3RhcnRfdGltZSwNCiAgICAgICAgICBlbmRfdGltZTp0aGlzLmVuZF90aW1lLA0KICAgICAgICAgIHN0YXR1czp0aGlzLnN0YXR1cw0KICAgICAgICB9IA0KICAgICAgfQ0KICAgICAgbGV0IGVuY19hZnRlciAgPSBBZXMuZW5jcnlwdChkYXRhKTsgICAgIA0KICAgICAgbGV0IHRyYW5zZmVyID0gbmV3IFVSTFNlYXJjaFBhcmFtcygpOw0KICAgICAgdHJhbnNmZXIuYXBwZW5kKCdhZXNEYXRhJywgZW5jX2FmdGVyKTsgDQogICAgICB0aGlzLiRheGlvcyh7DQogICAgICAgICAgbWV0aG9kOiAncG9zdCcsDQogICAgICAgICAgdXJsOiAnYXBpcy9zdGF0aXN0aWMvc2VsZWN0RGF0YUNoYXJ0cycsDQogICAgICAgICAgZGF0YTp0cmFuc2Zlcg0KICAgICAgfSkudGhlbigocmVzcG9uc2UpPT4gew0KICAgICAgICAgIHRoYXQucGllQ2hhcnRzRGF0YSA9IHJlc3BvbnNlLmRhdGEuZGF0YS5waWVDaGFydHM7DQogICAgICAgICAgdGhhdC5jb2x1bW5DaGFydHNEYXRhID0gcmVzcG9uc2UuZGF0YS5kYXRhLmNvbHVtbkNoYXJ0czsNCiAgICAgICAgICANCiAgICAgICAgICBpZih0aGF0LmZsYWcgPT0gMCl7DQogICAgICAgICAgICB0aGF0LmNvbENoYXJ0cygpDQogICAgICAgICAgICB0aGF0LnBpZUNoYXJ0cygpDQogICAgICAgICAgICB0aGF0LmZsYWcgPSAxOw0KICAgICAgICAgIH0NCiAgICAgICAgIA0KICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7DQogICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7DQogICAgICB9KQ0KICAgIH0sY29sQ2hhcnRzKCl7DQogICAgICBsZXQgdGhhdCA9IHRoaXMNCiAgICAgICAgIHRoaXMuY29sUGxvdCA9IG5ldyBDb2x1bW4oJ2NvbENvbnRhaW5lcicsew0KICAgICAgICAgICAgZGF0YTp0aGF0LmNvbHVtbkNoYXJ0c0RhdGEsDQogICAgICAgICAgICB4RmllbGQ6ICduYW1lJywNCiAgICAgICAgICAgIHlGaWVsZDogJ251bWJlcicsDQogICAgICAgICAgICBzZXJpZXNGaWVsZDogJ25hbWUnLA0KICAgICAgICAgICAgbWluQ29sdW1uV2lkdGg6IDUwLA0KICAgICAgICAgICAgbWF4Q29sdW1uV2lkdGg6IDUwLA0KICAgICAgICAgICAgbGVnZW5kOiB7DQogICAgICAgICAgICAgIGxheW91dDogJ2hvcml6b250YWwnLA0KICAgICAgICAgICAgICBwb3NpdGlvbjogJ3RvcCcNCiAgICAgICAgICAgIH0sDQogICAgICAgICAgICBsYWJlbDogew0KICAgICAgICAgICAgICAvLyDlj6/miYvliqjphY3nva4gbGFiZWwg5pWw5o2u5qCH562+5L2N572uDQogICAgICAgICAgICAgIHBvc2l0aW9uOiAnbWlkZGxlJywgLy8gJ3RvcCcsICdib3R0b20nLCAnbWlkZGxlJywNCiAgICAgICAgICAgICAgLy8g6YWN572u5qC35byPDQogICAgICAgICAgICAgIHN0eWxlOiB7DQogICAgICAgICAgICAgICAgZmlsbDogJyNGRkZGRkYnLA0KICAgICAgICAgICAgICAgIG9wYWNpdHk6IDEwMCwNCiAgICAgICAgICAgICAgfSwNCiAgICAgICAgICAgICAgZm9ybWF0dGVyKHZhbHVlKXsNCiAgICAgICAgICAgICAgICBkZWJ1Z2dlcg0KICAgICAgICAgICAgICAgIGlmKHZhbHVlLm51bWJlciA9PSAnMCcpew0KICAgICAgICAgICAgICAgICAgdmFsdWUgPSAyMA0KICAgICAgICAgICAgICAgICAgcmV0dXJuICIw6aG5Ig0KICAgICAgICAgICAgICAgIH1lbHNlew0KICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlLm51bWJlcisi6aG5Ig0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfSwNCiAgICAgICAgfSkNCiAgICAgICAgdGhpcy5jb2xQbG90LnJlbmRlcigpDQogICAgICAgICAgICAgIA0KICAgIH0sDQogICAgcGllQ2hhcnRzKCl7DQogICAgICAgIGxldCB0aGF0ID0gdGhpcw0KICAgICAgICB0aGlzLnBpZVBsb3QgPSBuZXcgUGllKCdwaWVDb250YWluZXInLCB7DQogICAgICAgICAgICBhcHBlbmRQYWRkaW5nOiAxMCwNCiAgICAgICAgICAgIGRhdGE6dGhhdC5waWVDaGFydHNEYXRhLA0KICAgICAgICAgICAgYW5nbGVGaWVsZDogJ3ZhbHVlJywNCiAgICAgICAgICAgIGNvbG9yRmllbGQ6ICd0eXBlJywNCiAgICAgICAgICAgIHJhZGl1czogMC44LA0KICAgICAgICAgICAgbGFiZWw6IHsNCiAgICAgICAgICAgICAgICB0eXBlOiAnc3BpZGVyJywNCiAgICAgICAgICAgICAgICBjb250ZW50OiAne25hbWV9IHtwZXJjZW50YWdlfScNCiAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgfSwNCiAgICAgICAgICAgIGxlZ2VuZDogew0KICAgICAgICAgICAgICAgIGxheW91dDogJ2hvcml6b250YWwnLA0KICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAndG9wJw0KICAgICAgICAgICAgfSwgICANCiAgICAgICAgICAgIGludGVyYWN0aW9uczogW3sgdHlwZTogJ3BpZS1sZWdlbmQtYWN0aXZlJyB9LCB7IHR5cGU6ICdlbGVtZW50LWFjdGl2ZScgfV0sDQogICAgICAgIH0pOw0KICAgICAgICB0aGlzLnBpZVBsb3QucmVuZGVyKCk7DQogICAgfQ0KDQogIH0sDQogIG1vdW50ZWQoKXsNCiAgICB0aGlzLmRhdGFDaGFydHNBcGkoKQ0KDQogICAgDQogIH0sd2F0Y2g6ew0KICAgICAgY29sdW1uQ2hhcnRzRGF0YShhLGIpew0KICAgICAgICANCiAgICAgICAgdGhpcy5jb2xQbG90LmNoYW5nZURhdGEoYSkNCsKgwqDCoCAgICAgdGhpcy5jb2xQbG90LnJlbmRlcigpDQogICAgICAgIA0KICAgICAgfSwNCiAgICAgIHBpZUNoYXJ0c0RhdGEoYSxiKXsNCiAgICAgICAgdGhpcy5waWVQbG90LmNoYW5nZURhdGEoYSkNCsKgwqDCoCAgICAgdGhpcy5waWVQbG90LnJlbmRlcigpDQogICAgICAgDQoNCiAgICAgIH0NCiAgfQ0KfTsNCg=="},{"version":3,"sources":["DataSelect.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6CA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA","file":"DataSelect.vue","sourceRoot":"src/components/Layout","sourcesContent":[" <template>\r\n    <a-row>\r\n      <a-col :span=\"11\" style=\"text-align:right\">\r\n        <a>请选择想要查看的数据：</a>\r\n        <a-select default-value=\"各分厂上报数\" style=\"width: 140px\">\r\n          <a-select-option :value=\"sbs\"  @click=\"select1()\">\r\n            各分厂上报数\r\n          </a-select-option>\r\n          <a-select-option :value=\"cls\" @click=\"select2()\">\r\n            各分厂处理数\r\n          </a-select-option>\r\n          <a-select-option :value=\"wcl\" @click=\"select3()\">\r\n            各分厂未处理数\r\n          </a-select-option>\r\n        </a-select>\r\n      </a-col>\r\n      <a-col :span=\"1\">\r\n\r\n      </a-col>\r\n      <a-col :span=\"12\">\r\n          <a>请选择时间范围：</a>\r\n          <a-range-picker locale={locale}\r\n            :ranges=\"{ 今日: [moment(), moment()], '本月': [moment(), moment().endOf('month')] }\"\r\n            @change=\"onChange\"\r\n          />\r\n      </a-col>\r\n    \r\n      <a-col :span=\"24\" style=\"height:40px\"></a-col>\r\n\r\n      <a-rows>\r\n        <a-col :span=\"12\">\r\n            <div id=\"colContainer\"></div>\r\n            <!-- <data-charts :colChartsData=\"chartsData\"></data-charts> -->\r\n        </a-col>\r\n\r\n        <a-col :span=\"12\">\r\n          <div id=\"pieContainer\"></div>\r\n          <!-- :pieChartsData=\"chartsData\" -->\r\n            <!-- <pie-charts :pieChartsData=\"chartsData\"></pie-charts> -->\r\n        </a-col>\r\n      </a-rows>\r\n  </a-row>\r\n  \r\n</template>\r\n<script>\r\nimport { Column } from '@antv/g2plot';\r\n\r\nimport { Pie } from '@antv/g2plot';\r\n\r\n\r\nimport Aes from '../../utils/aes.js'\r\nimport moment from 'moment';\r\nimport locale from 'ant-design-vue/es/locale/zh_CN'\r\nimport \"moment/locale/zh-cn\"\r\nexport default {\r\n  data() {\r\n    return {\r\n      flag:0,\r\n      dateFormat: 'YYYY/MM/DD',\r\n      monthFormat: 'YYYY/MM',\r\n      start_time:'',\r\n      end_time:'',\r\n      status:'',\r\n      sbs:'-1',\r\n      cls:'3',\r\n      wcl:'1',\r\n      pieChartsData:[],\r\n      columnChartsData:[],\r\n      colPlot:{},\r\n      piePlot:{}\r\n    };\r\n  },\r\n  components:{\r\n      \r\n\r\n  },\r\n  methods: {\r\n    moment,\r\n    \r\n    onChange(dates, dateStrings) {\r\n      this.start_time = dateStrings[0]\r\n      this.end_time = dateStrings[1]\r\n      this.dataChartsApi(\"date\")\r\n    },\r\n    handleChange(value) {\r\n      alert(value)\r\n    },\r\n    select1(){\r\n      this.status =  \"\"\r\n      this.dataChartsApi(\"select1\")\r\n    },\r\n    select2(){\r\n      this.status =  this.cls\r\n      this.dataChartsApi(\"select2\")\r\n    },\r\n    select3(){\r\n      this.status =  this.wcl\r\n      this.dataChartsApi(\"select3\")\r\n    },\r\n    dataChartsApi(params){\r\n      let data\r\n      let that = this\r\n      if(params == undefined){\r\n        data = {\r\n          start_time:\"\",\r\n          end_time:\"\",\r\n          status:\"\"\r\n        } \r\n      }else{\r\n         data = {\r\n          start_time:this.start_time,\r\n          end_time:this.end_time,\r\n          status:this.status\r\n        } \r\n      }\r\n      let enc_after  = Aes.encrypt(data);     \r\n      let transfer = new URLSearchParams();\r\n      transfer.append('aesData', enc_after); \r\n      this.$axios({\r\n          method: 'post',\r\n          url: 'apis/statistic/selectDataCharts',\r\n          data:transfer\r\n      }).then((response)=> {\r\n          that.pieChartsData = response.data.data.pieCharts;\r\n          that.columnChartsData = response.data.data.columnCharts;\r\n          \r\n          if(that.flag == 0){\r\n            that.colCharts()\r\n            that.pieCharts()\r\n            that.flag = 1;\r\n          }\r\n         \r\n      }).catch(function (error) {\r\n            console.log(error);\r\n      })\r\n    },colCharts(){\r\n      let that = this\r\n         this.colPlot = new Column('colContainer',{\r\n            data:that.columnChartsData,\r\n            xField: 'name',\r\n            yField: 'number',\r\n            seriesField: 'name',\r\n            minColumnWidth: 50,\r\n            maxColumnWidth: 50,\r\n            legend: {\r\n              layout: 'horizontal',\r\n              position: 'top'\r\n            },\r\n            label: {\r\n              // 可手动配置 label 数据标签位置\r\n              position: 'middle', // 'top', 'bottom', 'middle',\r\n              // 配置样式\r\n              style: {\r\n                fill: '#FFFFFF',\r\n                opacity: 100,\r\n              },\r\n              formatter(value){\r\n                debugger\r\n                if(value.number == '0'){\r\n                  value = 20\r\n                  return \"0项\"\r\n                }else{\r\n                  return value.number+\"项\"\r\n                }\r\n                \r\n              }\r\n            },\r\n        })\r\n        this.colPlot.render()\r\n              \r\n    },\r\n    pieCharts(){\r\n        let that = this\r\n        this.piePlot = new Pie('pieContainer', {\r\n            appendPadding: 10,\r\n            data:that.pieChartsData,\r\n            angleField: 'value',\r\n            colorField: 'type',\r\n            radius: 0.8,\r\n            label: {\r\n                type: 'spider',\r\n                content: '{name} {percentage}'\r\n               \r\n            },\r\n            legend: {\r\n                layout: 'horizontal',\r\n                position: 'top'\r\n            },   \r\n            interactions: [{ type: 'pie-legend-active' }, { type: 'element-active' }],\r\n        });\r\n        this.piePlot.render();\r\n    }\r\n\r\n  },\r\n  mounted(){\r\n    this.dataChartsApi()\r\n\r\n    \r\n  },watch:{\r\n      columnChartsData(a,b){\r\n        \r\n        this.colPlot.changeData(a)\r\n        this.colPlot.render()\r\n        \r\n      },\r\n      pieChartsData(a,b){\r\n        this.piePlot.changeData(a)\r\n        this.piePlot.render()\r\n       \r\n\r\n      }\r\n  }\r\n};\r\n</script>\r\n<style lang=\"scss\">\r\n\r\n</style>"]}]}