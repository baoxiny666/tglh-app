{"remainingRequest":"E:\\VueProject\\tglh-app\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\VueProject\\tglh-app\\src\\components\\reportrecords\\ReportRecordsList.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\VueProject\\tglh-app\\src\\components\\reportrecords\\ReportRecordsList.vue","mtime":1610066297207},{"path":"E:\\VueProject\\tglh-app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500371},{"path":"E:\\VueProject\\tglh-app\\node_modules\\babel-loader\\lib\\index.js","mtime":315532801399},{"path":"E:\\VueProject\\tglh-app\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500371},{"path":"E:\\VueProject\\tglh-app\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500371}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCgogICAgY29uc3QgY29sdW1ucyA9IFsKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ+W6j+WPtycsCiAgICAgICAgICAgICAgICAgICAgICBkYXRhSW5kZXg6ICd4aCcKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOidJRCcsCiAgICAgICAgICAgICAgICAgICAgICBkYXRhSW5kZXg6J2lkJywKICAgICAgICAgICAgICAgICAgICAgIGhpZGRlbjp0cnVlCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAn5Yy65Z+f57yW5Y+3JywKICAgICAgICAgICAgICAgICAgICAgICAgZGF0YUluZGV4OiAnYXJlYV9ubycKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICfljLrln5/lkI3np7AnLAogICAgICAgICAgICAgICAgICAgICAgICBkYXRhSW5kZXg6ICdhcmVhX25hbWUnCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAn6LSf6LSj5Lq657yW5Y+3JywKICAgICAgICAgICAgICAgICAgICAgICAgZGF0YUluZGV4OiAnbWFuYWdlX3VzZXInCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAn6LSf6LSj5Lq65aeT5ZCNJywKICAgICAgICAgICAgICAgICAgICAgICAgZGF0YUluZGV4OiAnbWFuYWdlX3VzZXJfbmFtZScKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICfotJ/otKPkurrmiYvmnLrlj7cnLAogICAgICAgICAgICAgICAgICAgICAgICBkYXRhSW5kZXg6ICdtYW5hZ2VfcGhvbmUnCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAn6ZqQ5oKj5o+P6L+wJywKICAgICAgICAgICAgICAgICAgICAgICAgZGF0YUluZGV4OiAnZGVzYycKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICforrDlvZXnirbmgIEnLAogICAgICAgICAgICAgICAgICAgICAgICBkYXRhSW5kZXg6ICdzdGF0dXMnCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAn5Yib5bu65pe26Ze0JywKICAgICAgICAgICAgICAgICAgICAgICAgZGF0YUluZGV4OiAnY3JlYXRlX3RpbWUnCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAn5pu05paw5pe26Ze0JywKICAgICAgICAgICAgICAgICAgICAgICAgZGF0YUluZGV4OiAndXBkYXRlX3RpbWUnCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAn5pON5L2cJywKICAgICAgICAgICAgICAgICAgICAgICAgZGF0YUluZGV4OiAnYWN0aW9uJywKICAgICAgICAgICAgICAgICAgICAgICAgc2NvcGVkU2xvdHM6IHsgY3VzdG9tUmVuZGVyOidhY3Rpb24nfSwKICAgICAgICAgICAgICAgICAgICAgICAgYWxpZ246ICdjZW50ZXInCiAgICAgICAgICAgICAgICAgICAgfQogICAgXTsKaW1wb3J0IFJlcG9ydFJlY29yZHNEZXRhaWwgZnJvbSAnLi9SZXBvcnRSZWNvcmRzRGV0YWlsLnZ1ZScKaW1wb3J0IEFlcyBmcm9tICcuLi8uLi91dGlscy9hZXMuanMnCmV4cG9ydCBkZWZhdWx0IHsKICAgY29tcG9uZW50czp7CiAgICAgUmVwb3J0UmVjb3Jkc0RldGFpbAogICB9LAogICBkYXRhKCl7CiAgICAgIHJldHVybiB7CiAgICAgICAgY29sdW1ucywKICAgICAgICByZWNvcmRJZDonJywKICAgICAgICByZXBvcnRSRGV0YWlsOnt9LAogICAgICAgIHJyZERldGFpbFZpc2libGU6ZmFsc2UsCiAgICAgICAgcmVxdWVzdFBpY3M6W10sCiAgICAgICAgbmV3UmVxdWVzdFBpY3M6W10sCiAgICAgICAgcGFnaW5hdGlvbjp7CiAgICAgICAgICAgICAgICBkZWZhdWx0Q3VycmVudDogMSwgCiAgICAgICAgICAgICAgICBkZWZhdWx0UGFnZVNpemU6IDksIAogICAgICAgICAgICAgICAgdG90YWw6IDAsIAogICAgICAgICAgICAgICAgcGFnZVNpemVPcHRpb25zOiBbIjUiLCAiMTAiLCAiMTUiLCAiMjAiXSwKCiAgICAgICAgICAgICAgICBwb3NpdGlvbjonYm90aCcsCiAgICAgICAgICAgICAgICBzaG93VG90YWw6ICh0b3RhbCwgcmFuZ2UpID0+IHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHJhbmdlWzBdICsgJy0nICsgcmFuZ2VbMV0gKyAnIOWFsScgKyB0b3RhbCArICfmnaEnCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgb25TaG93U2l6ZUNoYW5nZTooY3VycmVudCwgcGFnZVNpemUpPT50aGlzLnBhZ2VTaXplID0gcGFnZVNpemUsCiAgICAgICAgICAgICAgICBoaWRlT25TaW5nbGVQYWdlOnRydWUsCiAgICAgICAgICAgICAgICBzaG93UXVpY2tKdW1wZXI6dHJ1ZQogICAgICAgIH0KICAgIH0KICB9LAogIHByb3BzOlsibWVzc2FnZSJdLAogIG1ldGhvZHM6ewogICAgICBoYW5kbGVVc2VyRWRpdChwYXJhbXMpewogICAgICAgIGNvbnNvbGUubG9nKHBhcmFtcykKICAgICAgfSwKICAgICAgaGFuZGxlVXNlckRlbChwYXJhbXMpewogICAgICAgIGNvbnNvbGUubG9nKHBhcmFtcykKICAgICAgfSwKICAgICAgY3VzdG9tUmVuZGVyOiBmdW5jdGlvbih0LCByLCBpbmRleCkgewogICAgICAgIHJldHVybiBwYXJzZUludChpbmRleCkgKyAxCiAgICAgIH0sCiAgICAgIG9uU2hvd1NpemVDaGFuZ2U6IChjdXJyZW50LCBwYWdlU2l6ZSkgPT4gewogICAgICAgIHRoaXMucGFnaW5hdGlvbi5kZWZhdWx0Q3VycmVudCA9IDEKICAgICAgICB0aGlzLnBhZ2luYXRpb24uZGVmYXVsdFBhZ2VTaXplID0gcGFnZVNpemUKICAgICAgfSwKICAgICAgLy8g5pS55Y+Y5q+P6aG15pWw6YeP5pe25pu05paw5pi+56S6CiAgICAgIG9uQ2hhbmdlOiAoY3VycmVudCwgc2l6ZSkgPT4gewogICAgICAgIHRoaXMucGFnaW5hdGlvbi5kZWZhdWx0Q3VycmVudCA9IGN1cnJlbnQKICAgICAgICB0aGlzLnBhZ2luYXRpb24uZGVmYXVsdFBhZ2VTaXplID0gc2l6ZQogICAgICAgIAogICAgICB9LAogICAgICB2aWV3RGV0YWlsKGluZGV4KXsKICAgICAgICBsZXQgdGhhdCA9IHRoaXMKICAgICAgICB0aGlzLnJlY29yZElkID0gaW5kZXguaWQKICAgICAgICB0aGlzLnJyZERldGFpbFZpc2libGUgPSB0cnVlCiAgICAgICAgbGV0IHJlY29yZElkT2JqID0geyJpZCI6dGhpcy5yZWNvcmRJZH07CiAgICAgICAgbGV0IGVuY19hZnRlciAgPSBBZXMuZW5jcnlwdChyZWNvcmRJZE9iaik7ICAgICAKICAgICAgICBsZXQgdHJhbnNmZXIgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCk7CiAgICAgICAgdHJhbnNmZXIuYXBwZW5kKCdhZXNEYXRhJywgZW5jX2FmdGVyKTsgCiAgICAgICAgdGhpcy4kYXhpb3MoewogICAgICAgICAgICBtZXRob2Q6ICdwb3N0JywKICAgICAgICAgICAgdXJsOiAnYXBpcy9yZXBvcnQvc2VsZWN0RGV0YWlsJywKICAgICAgICAgICAgZGF0YTp0cmFuc2ZlcgogICAgICAgIH0pLnRoZW4oKHJlc3BvbnNlKT0+IHsKICAgICAgICAgICAgdGhpcy5yZXBvcnRSRGV0YWlsID0gcmVzcG9uc2UuZGF0YS5kYXRhWzBdCiAgICAgICAgICAgIHRoaXMucmVxdWVzdFBpY3MgPSBKU09OLnBhcnNlKHJlc3BvbnNlLmRhdGEuZGF0YVswXS5pbWFnZXMpOwoKICAgICAgICAgICAgbGV0IF9yZXB1ZXN0UGljcyA9IHRoaXMucmVxdWVzdFBpY3MKICAgICAgICAgICAKICAgICAgICAgICAgdGhpcy5uZXdSZXF1ZXN0UGljcyA9IF9yZXB1ZXN0UGljcy5tYXAoZnVuY3Rpb24gKGl0ZW0saW5kZXgsX3JlcHVlc3RQaWNzKSB7IAogICAgICAgICAgICAgICAgcmV0dXJuIHRoYXQuJHN0b3JlLnN0YXRlLmNvbmZpZy5nbG9iYWxVcGxvYWRQaWNzICsgaXRlbTsgCiAgICAgICAgICAgIH0pLAogICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLm5ld1JlcXVlc3RQaWNzKQogICAgICAgICAgIAoKICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICAgIH0pCiAgICAgICAgIAogICAgICB9LAogICAgICBoYW5kbGVScmREZXRhaWxDYW5jZWwoKXsKICAgICAgICB0aGlzLnJyZERldGFpbFZpc2libGUgPSBmYWxzZQogICAgICB9LAogICAgICAvL+W5tuWPkeivt+axguWbvueJh+aWh+S7tgogICAgICB0b2dldGhlclJlcXVlc3RQaWNzKCl7CiAgICAgICAgdGhpcy4kYXhpb3MuYWxsKFtzZWFyY2hUb3BpYygpLCBzZWFyY2hzKCldKQogICAgICAgIC50aGVuKCgpID0+IHsKICAgICAgICAgICAgdGhpcy4kYXhpb3Muc3ByZWFkKChyZXMpID0+IHsKCiAgICAgICAgICAgIH0pCiAgICAgICAgICB9CiAgICAgICAgKTsKICAgICAgfQoKCiAgfSwKICBjb21wdXRlZDogewogICAgcm93U2VsZWN0aW9uKCkgewogICAgICByZXR1cm4gewogICAgICAgIG9uQ2hhbmdlOiAoc2VsZWN0ZWRSb3dLZXlzLCBzZWxlY3RlZFJvd3MpID0+IHsKICAgICAgICAgIGNvbnNvbGUubG9nKGBzZWxlY3RlZFJvd0tleXM6ICR7c2VsZWN0ZWRSb3dLZXlzfWAsICdzZWxlY3RlZFJvd3M6ICcsIHNlbGVjdGVkUm93cyk7CiAgICAgICAgfSwKICAgICAgICBnZXRDaGVja2JveFByb3BzOiByZWNvcmQgPT4gKHsKICAgICAgICAgIHByb3BzOiB7CiAgICAgICAgICAgIGRpc2FibGVkOiByZWNvcmQubmFtZSA9PT0gJ0Rpc2FibGVkIFVzZXInLCAvLyBDb2x1bW4gY29uZmlndXJhdGlvbiBub3QgdG8gYmUgY2hlY2tlZAogICAgICAgICAgICBuYW1lOiByZWNvcmQubmFtZSwKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICB9CiAgICB9CiAgfSwKICBtb3VudGVkKCl7CiAgICAKICB9Cn0K"},{"version":3,"sources":["ReportRecordsList.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"ReportRecordsList.vue","sourceRoot":"src/components/reportrecords","sourcesContent":["<template>\r\n    <a-row>\r\n      <report-records-detail\r\n          :reportRecordsDetailVisible=\"rrdDetailVisible\"\r\n          :reportRecordsDetailContent=\"reportRDetail\"\r\n          :requestPicsContent=\"newRequestPics\"\r\n          @cancel=\"handleRrdDetailCancel()\"\r\n      >\r\n      </report-records-detail>\r\n      <a-table \r\n        :row-selection=\"rowSelection\"\r\n        :columns=\"columns\"\r\n        :data-source=\"message\"\r\n        :pagination=\"pagination\"\r\n        >\r\n\r\n           \r\n         \r\n            <span slot=\"action\" slot-scope=\"record,index\">\r\n                <a @click=\"viewDetail(index)\">详情</a>\r\n                <!-- <a-divider type=\"vertical\" />\r\n                <a @click=\"deleteRecord(index)\">删除</a> -->\r\n            </span>\r\n           \r\n    </a-table>\r\n    </a-row>\r\n    \r\n</template>\r\n<script>\r\n\r\n    const columns = [\r\n                    {\r\n                      title: '序号',\r\n                      dataIndex: 'xh'\r\n                    },\r\n                    {\r\n                      title:'ID',\r\n                      dataIndex:'id',\r\n                      hidden:true\r\n                    },\r\n                    {\r\n                        title: '区域编号',\r\n                        dataIndex: 'area_no'\r\n                    },\r\n                    {\r\n                        title: '区域名称',\r\n                        dataIndex: 'area_name'\r\n                    },\r\n                    {\r\n                        title: '负责人编号',\r\n                        dataIndex: 'manage_user'\r\n                    },\r\n                    {\r\n                        title: '负责人姓名',\r\n                        dataIndex: 'manage_user_name'\r\n                    },\r\n                    {\r\n                        title: '负责人手机号',\r\n                        dataIndex: 'manage_phone'\r\n                    },\r\n                    {\r\n                        title: '隐患描述',\r\n                        dataIndex: 'desc'\r\n                    },\r\n                    {\r\n                        title: '记录状态',\r\n                        dataIndex: 'status'\r\n                    },\r\n                    {\r\n                        title: '创建时间',\r\n                        dataIndex: 'create_time'\r\n                    },\r\n                    {\r\n                        title: '更新时间',\r\n                        dataIndex: 'update_time'\r\n                    },\r\n                    {\r\n                        title: '操作',\r\n                        dataIndex: 'action',\r\n                        scopedSlots: { customRender:'action'},\r\n                        align: 'center'\r\n                    }\r\n    ];\r\nimport ReportRecordsDetail from './ReportRecordsDetail.vue'\r\nimport Aes from '../../utils/aes.js'\r\nexport default {\r\n   components:{\r\n     ReportRecordsDetail\r\n   },\r\n   data(){\r\n      return {\r\n        columns,\r\n        recordId:'',\r\n        reportRDetail:{},\r\n        rrdDetailVisible:false,\r\n        requestPics:[],\r\n        newRequestPics:[],\r\n        pagination:{\r\n                defaultCurrent: 1, \r\n                defaultPageSize: 9, \r\n                total: 0, \r\n                pageSizeOptions: [\"5\", \"10\", \"15\", \"20\"],\r\n\r\n                position:'both',\r\n                showTotal: (total, range) => {\r\n                  return range[0] + '-' + range[1] + ' 共' + total + '条'\r\n                },\r\n                onShowSizeChange:(current, pageSize)=>this.pageSize = pageSize,\r\n                hideOnSinglePage:true,\r\n                showQuickJumper:true\r\n        }\r\n    }\r\n  },\r\n  props:[\"message\"],\r\n  methods:{\r\n      handleUserEdit(params){\r\n        console.log(params)\r\n      },\r\n      handleUserDel(params){\r\n        console.log(params)\r\n      },\r\n      customRender: function(t, r, index) {\r\n        return parseInt(index) + 1\r\n      },\r\n      onShowSizeChange: (current, pageSize) => {\r\n        this.pagination.defaultCurrent = 1\r\n        this.pagination.defaultPageSize = pageSize\r\n      },\r\n      // 改变每页数量时更新显示\r\n      onChange: (current, size) => {\r\n        this.pagination.defaultCurrent = current\r\n        this.pagination.defaultPageSize = size\r\n        \r\n      },\r\n      viewDetail(index){\r\n        let that = this\r\n        this.recordId = index.id\r\n        this.rrdDetailVisible = true\r\n        let recordIdObj = {\"id\":this.recordId};\r\n        let enc_after  = Aes.encrypt(recordIdObj);     \r\n        let transfer = new URLSearchParams();\r\n        transfer.append('aesData', enc_after); \r\n        this.$axios({\r\n            method: 'post',\r\n            url: 'apis/report/selectDetail',\r\n            data:transfer\r\n        }).then((response)=> {\r\n            this.reportRDetail = response.data.data[0]\r\n            this.requestPics = JSON.parse(response.data.data[0].images);\r\n\r\n            let _repuestPics = this.requestPics\r\n           \r\n            this.newRequestPics = _repuestPics.map(function (item,index,_repuestPics) { \r\n                return that.$store.state.config.globalUploadPics + item; \r\n            }),\r\n            console.log(this.newRequestPics)\r\n           \r\n\r\n        }).catch(function (error) {\r\n            console.log(error);\r\n        })\r\n         \r\n      },\r\n      handleRrdDetailCancel(){\r\n        this.rrdDetailVisible = false\r\n      },\r\n      //并发请求图片文件\r\n      togetherRequestPics(){\r\n        this.$axios.all([searchTopic(), searchs()])\r\n        .then(() => {\r\n            this.$axios.spread((res) => {\r\n\r\n            })\r\n          }\r\n        );\r\n      }\r\n\r\n\r\n  },\r\n  computed: {\r\n    rowSelection() {\r\n      return {\r\n        onChange: (selectedRowKeys, selectedRows) => {\r\n          console.log(`selectedRowKeys: ${selectedRowKeys}`, 'selectedRows: ', selectedRows);\r\n        },\r\n        getCheckboxProps: record => ({\r\n          props: {\r\n            disabled: record.name === 'Disabled User', // Column configuration not to be checked\r\n            name: record.name,\r\n          }\r\n        })\r\n      }\r\n    }\r\n  },\r\n  mounted(){\r\n    \r\n  }\r\n}\r\n</script>\r\n<style scoped>\r\n\r\n</style>"]}]}